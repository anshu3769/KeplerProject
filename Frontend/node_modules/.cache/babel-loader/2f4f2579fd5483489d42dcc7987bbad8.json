{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar React = tslib_1.__importStar(require(\"react\"));\n\nvar hoist_non_react_statics_1 = tslib_1.__importDefault(require(\"hoist-non-react-statics\"));\n\nvar parser_1 = require(\"./parser\");\n\nvar Mutation_1 = tslib_1.__importDefault(require(\"./Mutation\"));\n\nvar hoc_utils_1 = require(\"./hoc-utils\");\n\nfunction withMutation(document, operationOptions) {\n  if (operationOptions === void 0) {\n    operationOptions = {};\n  }\n\n  var operation = parser_1.parser(document);\n  var _a = operationOptions.options,\n      options = _a === void 0 ? hoc_utils_1.defaultMapPropsToOptions : _a,\n      _b = operationOptions.alias,\n      alias = _b === void 0 ? 'Apollo' : _b;\n  var mapPropsToOptions = options;\n  if (typeof mapPropsToOptions !== 'function') mapPropsToOptions = function mapPropsToOptions() {\n    return options;\n  };\n  return function (WrappedComponent) {\n    var graphQLDisplayName = alias + \"(\" + hoc_utils_1.getDisplayName(WrappedComponent) + \")\";\n\n    var GraphQL = function (_super) {\n      tslib_1.__extends(GraphQL, _super);\n\n      function GraphQL() {\n        return _super !== null && _super.apply(this, arguments) || this;\n      }\n\n      GraphQL.prototype.render = function () {\n        var props = this.props;\n        var opts = mapPropsToOptions(props);\n\n        if (operationOptions.withRef) {\n          this.withRef = true;\n          props = Object.assign({}, props, {\n            ref: this.setWrappedInstance\n          });\n        }\n\n        if (!opts.variables && operation.variables.length > 0) {\n          opts.variables = hoc_utils_1.calculateVariablesFromProps(operation, props);\n        }\n\n        return React.createElement(Mutation_1.default, tslib_1.__assign({}, opts, {\n          mutation: document,\n          ignoreResults: true\n        }), function (mutate, _result) {\n          var _a, _b;\n\n          var name = operationOptions.name || 'mutate';\n          var childProps = (_a = {}, _a[name] = mutate, _a);\n\n          if (operationOptions.props) {\n            var newResult = (_b = {}, _b[name] = mutate, _b.ownProps = props, _b);\n            childProps = operationOptions.props(newResult);\n          }\n\n          return React.createElement(WrappedComponent, tslib_1.__assign({}, props, childProps));\n        });\n      };\n\n      GraphQL.displayName = graphQLDisplayName;\n      GraphQL.WrappedComponent = WrappedComponent;\n      return GraphQL;\n    }(hoc_utils_1.GraphQLBase);\n\n    return hoist_non_react_statics_1.default(GraphQL, WrappedComponent, {});\n  };\n}\n\nexports.withMutation = withMutation;","map":null,"metadata":{},"sourceType":"script"}