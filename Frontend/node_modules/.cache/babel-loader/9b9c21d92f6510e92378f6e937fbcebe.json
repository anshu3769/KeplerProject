{"ast":null,"code":"import _regeneratorRuntime from \"/home/anshu/sandbox/KeplerProject/Frontend/typefast/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/anshu/sandbox/KeplerProject/Frontend/typefast/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/anshu/sandbox/KeplerProject/Frontend/typefast/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anshu/sandbox/KeplerProject/Frontend/typefast/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anshu/sandbox/KeplerProject/Frontend/typefast/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anshu/sandbox/KeplerProject/Frontend/typefast/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anshu/sandbox/KeplerProject/Frontend/typefast/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anshu/sandbox/KeplerProject/Frontend/typefast/src/components/App.js\";\nimport React from 'react';\nimport '../styles/App.css';\nimport StartButton from './StartButton';\nimport Timer from './Timer';\nimport CreatePlayer from './Player'; //import RegisterPlayer from './Register';\n\nimport WordList from './WordList';\nimport UserList from './UserList';\nimport UpdateScore from './Score';\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  //Constructor...Starts\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.handleChange = function (event) {\n      //this.state.value = event.target.value\n      _this.setState({\n        value: event.target.value\n      });\n    };\n\n    _this.handleFirstNameChange = function (event) {\n      console.log('firstnamechange');\n      _this.state.firstName = event.target.value; //this.setState({firstName: event.target.value});\n\n      console.log('event.target.value ', event.target.value);\n      console.log('First name ', _this.state.firstName);\n    };\n\n    _this.handleLastNameChange = function (event) {\n      console.log('lastnamechange');\n      _this.state.lastName = event.target.value; //this.setState({lastName: event.target.value});\n\n      console.log('Last name ', _this.state.lastName);\n    };\n\n    _this.handleUserNameChange =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n                console.log('handle user name change');\n                console.log('event target user name', _this.state.value);\n                if (event.target.value) _this.state.userName = event.target.value; //coming from registration\n                else _this.state.userName = _this.state.value; //coming from returning user\n\n                console.log(\" User name \", _this.state.userName);\n\n                if (!(_this.state.userName === '')) {\n                  _context.next = 13;\n                  break;\n                }\n\n                _context.next = 8;\n                return _this.setState({\n                  view: 'Register',\n                  firstName: '',\n                  lastName: '',\n                  users: [],\n                  error: 'Username should not be blank'\n                });\n\n              case 8:\n                console.log(\" Error \", _this.state.error);\n                console.log(\" User name \", _this.state.userName); //this.setState({userName: event.target.value});\n\n                console.log('user name ', _this.state.userName);\n                _context.next = 14;\n                break;\n\n              case 13:\n                //Check on event.target.value is to avoid going in this\n                //if condition if the user is first time user.\n                if (!event.target.value) {\n                  //if the returning user is not present in the database.\n                  if (_this.isUniqueUser()) {\n                    console.log('user not registered');\n                    _this.state.error = 'Not a registered user!!'; // this.setState({\n                    //   view: 'Register',\n                    //   error: 'Not a registered user!!'\n                    // });\n                  } else {\n                    //this.error = '';\n                    _this.setState({\n                      view: 'Loading words...',\n                      value: '',\n                      error: ''\n                    });\n                  }\n                }\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleWordSubmit = function (event) {\n      //call the create player mutation with the given input\n      console.log('this state value = ', _this.state.value);\n\n      if (_this.timerStarted) {\n        if (_this.index < _this.inputWords.length - 1) {\n          _this.index++;\n          console.log('Handle submit if::index = ', _this.index);\n\n          _this.outputWords.push(_this.state.value);\n\n          _this.setState({\n            text: _this.inputWords[_this.index].word\n          });\n        } else {\n          _this.calculateScores();\n\n          _this.setState({\n            view: 'Score Time'\n          });\n        } // to clear the input box every time. This gives warning though\n\n\n        _this.state.value = '';\n        _this.state.error = '';\n      } else {\n        console.log('timer not started'); // this.state.error = 'Please start the timer to play';\n\n        _this.setState({\n          view: 'Game',\n          error: 'Please start the timer to play'\n        });\n      }\n\n      event.preventDefault();\n    };\n\n    _this.isUniqueUser = function () {\n      var i;\n      console.log('isUniqueUser');\n      console.log('user = ', _this.state.userName);\n\n      for (i = 0; i < _this.state.users.length; i++) {\n        console.log('for loop ', _this.state.users[i]);\n\n        if (_this.state.users[i].userName === _this.state.userName) {\n          return false;\n        }\n      }\n\n      return true;\n    };\n\n    _this.handleRegister = function () {\n      console.log('handleRegister');\n      console.log('firstName ', _this.state.firstName);\n      console.log('lastName ', _this.state.lastName);\n      console.log('userName ', _this.state.userName);\n\n      if (_this.state.userName === '') {\n        //this.error = 'Username should not be blank!!!!';\n        _this.setState({\n          view: 'Register',\n          firstName: '',\n          lastName: '',\n          users: [],\n          error: 'Username should not be blank!!!!'\n        });\n      } else if (_this.isUniqueUser()) {\n        console.log('new user'); //this.error = '';\n\n        _this.setState({\n          view: 'Loading words...',\n          error: ''\n        });\n      } else {\n        //this.error = 'Username already taken!!!!';\n        _this.setState({\n          view: 'Register',\n          error: 'Username already taken!!!!'\n        });\n      }\n    };\n\n    _this.handleWordList = function (words) {\n      _this.inputWords = words;\n\n      _this.setState({\n        view: 'Game'\n      });\n    };\n\n    _this.handleUserList = function (users) {\n      console.log('handle user list');\n      _this.state.users = users;\n      console.log(_this.state.users.length);\n    };\n\n    _this.ticks = function () {\n      var min = Math.floor(_this.secondsRemaining / 60);\n      var sec = _this.secondsRemaining;\n\n      _this.setState({\n        minutes: min,\n        seconds: sec\n      });\n\n      if (min < 10) {\n        _this.setState({\n          minutes: '0' + min\n        });\n      }\n\n      if (sec < 10) {\n        _this.setState({\n          seconds: '0' + sec\n        });\n      }\n\n      if (min === 0 & sec === 0) {\n        clearInterval(_this.intervalHandle);\n\n        _this.setState({\n          view: 'Score Time'\n        });\n      }\n\n      _this.secondsRemaining--;\n    };\n\n    _this.startCountDown = function () {\n      console.log('inside countdown');\n      _this.intervalHandle = setInterval(_this.ticks, 1000);\n      _this.secondsRemaining = 10;\n      _this.timerStarted = true;\n    };\n\n    _this.state = {\n      minutes: '1',\n      seconds: '00',\n      text: 'Live',\n      view: 'Register',\n      firstName: '',\n      lastName: '',\n      userName: '',\n      //  scores: 0,\n      users: [],\n      value: '',\n      error: ''\n    };\n    _this.secondsRemaining = 0;\n    _this.intervalHandle = 0;\n    _this.inputWords = [];\n    _this.index = -1;\n    _this.outputWords = [];\n    _this.scores = 0;\n    _this.timerStared = false; //this.error = '';\n\n    return _this;\n  } //Constructor...Ends\n  //calculateScore....Starts\n\n\n  _createClass(App, [{\n    key: \"calculateScores\",\n    value: function calculateScores() {\n      var index = 1;\n\n      while (index < this.outputWords.length) {\n        console.log('outputWords ', this.outputWords[index]);\n        console.log('inputWords ', this.inputWords[index - 1].word);\n        if (this.outputWords[index] === this.inputWords[index - 1].word) this.scores++;\n        index++;\n      }\n    } //handleChange...Starts\n\n  }, {\n    key: \"render\",\n    //startCountDown...Ends\n    //render...Starts\n    value: function render() {\n      console.log(\"RENDER with state and error msg\", this.state.view + this.state.error);\n\n      if (this.state.view === 'Register') {\n        return React.createElement(\"div\", {\n          className: \"App\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 272\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 273\n          },\n          __self: this\n        }, \"!!!TYPING GAME!!!\"), React.createElement(UserList, {\n          onLoadComplete: this.handleUserList,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 274\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 275\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 276\n          },\n          __self: this\n        }, this.state.error), React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 277\n          },\n          __self: this\n        }, \" New User \"), React.createElement(CreatePlayer, {\n          handleRegister: this.handleRegister,\n          handleFirstName: this.handleFirstNameChange,\n          handleLastName: this.handleLastNameChange,\n          handleUserName: this.handleUserNameChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 278\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 285\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286\n          },\n          __self: this\n        }, \" Returning User\"), React.createElement(\"form\", {\n          onSubmit: this.handleUserNameChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 288\n          },\n          __self: this\n        }, \"User Name\", React.createElement(\"input\", {\n          type: \"text\",\n          value: this.state.value,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 290\n          },\n          __self: this\n        })), React.createElement(\"input\", {\n          type: \"submit\",\n          value: \"Submit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 296\n          },\n          __self: this\n        }))));\n      }\n\n      if (this.state.view === 'Loading words...') {\n        return React.createElement(WordList, {\n          onLoadComplete: this.handleWordList,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 304\n          },\n          __self: this\n        });\n      } // if (this.state.view === 'Timer') {\n      //   return (\n      //     <div className=\"App\">\n      //       <div float=\"left\">\n      //         <h2>!!!TYPING GAME!!!</h2>\n      //         <Timer minutes={this.state.minutes} seconds={this.state.seconds} />\n      //         <StartButton startCountDown={this.startCountDown} />\n      //       </div>\n      //     </div>\n      //   );\n      // }\n\n\n      if (this.state.view === 'Game') {\n        return React.createElement(\"div\", {\n          className: \"App\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 319\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          float: \"left\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 320\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 321\n          },\n          __self: this\n        }, \"!!!TYPING GAME!!!\"), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 322\n          },\n          __self: this\n        }), React.createElement(Timer, {\n          minutes: this.state.minutes,\n          seconds: this.state.seconds,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 323\n          },\n          __self: this\n        }), React.createElement(StartButton, {\n          startCountDown: this.startCountDown,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 324\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 326\n          },\n          __self: this\n        }, this.state.text), React.createElement(\"form\", {\n          onSubmit: this.handleWordSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 327\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          value: this.state.value,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 328\n          },\n          __self: this\n        }), React.createElement(\"input\", {\n          style: {\n            marginLeft: 10\n          },\n          type: \"submit\",\n          value: \"Submit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 333\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 334\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 335\n          },\n          __self: this\n        }, this.state.error))), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 339\n          },\n          __self: this\n        }));\n      }\n\n      if (this.state.view === 'Score Time') {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 345\n          },\n          __self: this\n        }, React.createElement(UpdateScore, {\n          userName: this.state.userName,\n          score: this.scores,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 346\n          },\n          __self: this\n        }), React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 347\n          },\n          __self: this\n        }, \"\\\"You scored \\\" \", this.scores));\n      }\n    } //render...Ends\n\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default App;","map":{"version":3,"sources":["/home/anshu/sandbox/KeplerProject/Frontend/typefast/src/components/App.js"],"names":["React","StartButton","Timer","CreatePlayer","WordList","UserList","UpdateScore","App","props","handleChange","event","setState","value","target","handleFirstNameChange","console","log","state","firstName","handleLastNameChange","lastName","handleUserNameChange","preventDefault","userName","view","users","error","isUniqueUser","handleWordSubmit","timerStarted","index","inputWords","length","outputWords","push","text","word","calculateScores","i","handleRegister","handleWordList","words","handleUserList","ticks","min","Math","floor","secondsRemaining","sec","minutes","seconds","clearInterval","intervalHandle","startCountDown","setInterval","scores","timerStared","marginLeft","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../styles/App.css';\nimport StartButton from './StartButton';\nimport Timer from './Timer';\nimport CreatePlayer from './Player';\n//import RegisterPlayer from './Register';\nimport WordList from './WordList';\nimport UserList from './UserList';\nimport UpdateScore from './Score';\n\nclass App extends React.Component {\n  //Constructor...Starts\n  constructor(props) {\n    super(props);\n    this.state = {\n      minutes: '1',\n      seconds: '00',\n      text: 'Live',\n      view: 'Register',\n      firstName: '',\n      lastName: '',\n      userName: '',\n      //  scores: 0,\n      users: [],\n      value: '',\n      error: '',\n    };\n\n    this.secondsRemaining = 0;\n    this.intervalHandle = 0;\n    this.inputWords = [];\n    this.index = -1;\n    this.outputWords = [];\n    this.scores = 0;\n    this.timerStared = false;\n    //this.error = '';\n  }\n  //Constructor...Ends\n\n  //calculateScore....Starts\n  calculateScores() {\n    let index = 1;\n    while (index < this.outputWords.length) {\n      console.log('outputWords ', this.outputWords[index]);\n      console.log('inputWords ', this.inputWords[index - 1].word);\n      if (this.outputWords[index] === this.inputWords[index - 1].word)\n        this.scores++;\n      index++;\n    }\n  }\n\n  //handleChange...Starts\n  handleChange = event => {\n    //this.state.value = event.target.value\n    this.setState({value: event.target.value});\n  };\n  //handleChange...Ends\n\n  //handleFirstNameChange...Starts\n  handleFirstNameChange = event => {\n    console.log('firstnamechange');\n    this.state.firstName = event.target.value;\n    //this.setState({firstName: event.target.value});\n    console.log('event.target.value ', event.target.value);\n    console.log('First name ', this.state.firstName);\n  };\n  //handleFirstNameChange...Ends\n\n  //handleLastNameChange...Starts\n  handleLastNameChange = event => {\n    console.log('lastnamechange');\n    this.state.lastName = event.target.value;\n    //this.setState({lastName: event.target.value});\n    console.log('Last name ', this.state.lastName);\n  };\n  //handleLastNameChange...Ends\n\n  //handleUserNameChange...Starts\n  handleUserNameChange = async (event) => {\n\n    event.preventDefault();\n    console.log('handle user name change');\n    console.log('event target user name', this.state.value);\n    if (event.target.value) this.state.userName = event.target.value;\n    //coming from registration\n    else this.state.userName = this.state.value; //coming from returning user\n    console.log(\" User name \",this.state.userName)\n    if (this.state.userName === '') {\n      //handles the  case when user  registers with a blank user name\n      //this.error = 'Username should not be blank';\n      await this.setState({\n        view: 'Register',\n        firstName: '',\n        lastName: '',\n        users: [],\n        error: 'Username should not be blank',\n      });\n\n      console.log(\" Error \",this.state.error)\n      console.log(\" User name \",this.state.userName)\n\n      //this.setState({userName: event.target.value});\n      console.log('user name ', this.state.userName);\n    } else {\n      //Check on event.target.value is to avoid going in this\n      //if condition if the user is first time user.\n      if (!event.target.value) {\n        //if the returning user is not present in the database.\n        if (this.isUniqueUser()) {\n          console.log('user not registered');\n          this.state.error = 'Not a registered user!!';\n          // this.setState({\n          //   view: 'Register',\n          //   error: 'Not a registered user!!'\n          // });\n        } else {\n          //this.error = '';\n          this.setState({\n            view: 'Loading words...',\n            value: '',\n            error:''\n          });\n        }\n      }\n    }\n  };\n  //handleUserNameChange...Ends\n\n  //handleWordSubmit...Starts\n  handleWordSubmit = event => {\n    //call the create player mutation with the given input\n\n    console.log('this state value = ', this.state.value);\n    if (this.timerStarted) {\n      if (this.index < this.inputWords.length - 1) {\n        this.index++;\n        console.log('Handle submit if::index = ', this.index);\n        this.outputWords.push(this.state.value);\n        this.setState({\n          text: this.inputWords[this.index].word,\n        });\n      } else {\n        this.calculateScores();\n        this.setState({\n          view: 'Score Time',\n        });\n      }\n\n      // to clear the input box every time. This gives warning though\n      this.state.value = '';\n      this.state.error = '';\n    } else {\n      console.log('timer not started');\n      // this.state.error = 'Please start the timer to play';\n      this.setState({\n        view: 'Game',\n        error:'Please start the timer to play'\n      });\n    }\n\n    event.preventDefault();\n  };\n  //handleWordSubmit...Ends\n\n  //isUniqueUser...starts\n  isUniqueUser = () => {\n    let i;\n    console.log('isUniqueUser');\n    console.log('user = ', this.state.userName);\n    for (i = 0; i < this.state.users.length; i++) {\n      console.log('for loop ', this.state.users[i]);\n      if (this.state.users[i].userName === this.state.userName) {\n        return false;\n      }\n    }\n    return true;\n  };\n  //isUniqueUser...ends\n\n  //handleRegister...Starts\n  handleRegister = () => {\n    console.log('handleRegister');\n\n    console.log('firstName ', this.state.firstName);\n    console.log('lastName ', this.state.lastName);\n    console.log('userName ', this.state.userName);\n\n    if (this.state.userName === '') {\n      //this.error = 'Username should not be blank!!!!';\n      this.setState({\n        view: 'Register',\n        firstName: '',\n        lastName: '',\n        users: [],\n        error: 'Username should not be blank!!!!',\n      });\n    } else if (this.isUniqueUser()) {\n      console.log('new user');\n      //this.error = '';\n      this.setState({\n        view: 'Loading words...',\n        error: '',\n      });\n    } else {\n      //this.error = 'Username already taken!!!!';\n      this.setState({\n        view: 'Register',\n        error: 'Username already taken!!!!',\n      });\n    }\n  };\n  //handleRegister...Ends\n\n  //handleWordList...Starts\n  handleWordList = words => {\n    this.inputWords = words;\n    this.setState({view: 'Game'});\n  };\n  //handleWordList...Ends\n\n  //handleUserList...Starts\n  handleUserList = users => {\n    console.log('handle user list');\n    this.state.users = users;\n    console.log(this.state.users.length);\n  };\n  //handleUserList...Ends\n\n  //ticks...Starts\n  ticks = () => {\n    var min = Math.floor(this.secondsRemaining / 60);\n    var sec = this.secondsRemaining;\n\n    this.setState({\n      minutes: min,\n      seconds: sec,\n    });\n\n    if (min < 10) {\n      this.setState({minutes: '0' + min});\n    }\n\n    if (sec < 10) {\n      this.setState({seconds: '0' + sec});\n    }\n\n    if ((min === 0) & (sec === 0)) {\n      clearInterval(this.intervalHandle);\n      this.setState({view: 'Score Time'});\n    }\n\n    this.secondsRemaining--;\n  };\n  //ticks..Ends\n\n  //startContDown...Starts\n  startCountDown = () => {\n    console.log('inside countdown');\n    this.intervalHandle = setInterval(this.ticks, 1000);\n    this.secondsRemaining = 10;\n    this.timerStarted = true;\n  };\n  //startCountDown...Ends\n\n  //render...Starts\n  render() {\n\n    console.log(\"RENDER with state and error msg\", this.state.view + this.state.error)\n\n    if (this.state.view === 'Register') {\n      return (\n        <div className=\"App\">\n          <h2>!!!TYPING GAME!!!</h2>\n          <UserList onLoadComplete={this.handleUserList} />\n          <div>\n            <h3>{this.state.error}</h3>\n            <h3> New User </h3>\n            <CreatePlayer\n              handleRegister={this.handleRegister}\n              handleFirstName={this.handleFirstNameChange}\n              handleLastName={this.handleLastNameChange}\n              handleUserName={this.handleUserNameChange}\n            />\n          </div>\n          <div>\n            <h3> Returning User</h3>\n            <form onSubmit={this.handleUserNameChange}>\n              <label>\n                User Name\n                <input\n                  type=\"text\"\n                  value={this.state.value}\n                  onChange={this.handleChange}\n                />\n              </label>\n              <input type=\"submit\" value=\"Submit\" />\n            </form>\n          </div>\n        </div>\n      );\n    }\n\n    if (this.state.view === 'Loading words...') {\n      return <WordList onLoadComplete={this.handleWordList} />;\n    }\n    // if (this.state.view === 'Timer') {\n    //   return (\n    //     <div className=\"App\">\n    //       <div float=\"left\">\n    //         <h2>!!!TYPING GAME!!!</h2>\n    //         <Timer minutes={this.state.minutes} seconds={this.state.seconds} />\n    //         <StartButton startCountDown={this.startCountDown} />\n    //       </div>\n    //     </div>\n    //   );\n    // }\n    if (this.state.view === 'Game') {\n      return (\n        <div className=\"App\">\n          <div float=\"left\">\n            <h2>!!!TYPING GAME!!!</h2>\n            <p />\n            <Timer minutes={this.state.minutes} seconds={this.state.seconds} />\n            <StartButton startCountDown={this.startCountDown} />\n          </div>\n          <div>{this.state.text}</div>\n          <form onSubmit={this.handleWordSubmit}>\n            <input\n              type=\"text\"\n              value={this.state.value}\n              onChange={this.handleChange}\n            />\n            <input style={{marginLeft: 10}} type=\"submit\" value=\"Submit\" />\n            <div>\n              <h3>{this.state.error}</h3>\n            </div>\n          </form>\n\n          <div />\n        </div>\n      );\n    }\n    if (this.state.view === 'Score Time') {\n      return (\n        <div>\n          <UpdateScore userName={this.state.userName} score={this.scores} />\n          <h1>\"You scored \" {this.scores}</h1>\n        </div>\n      );\n    }\n  }\n  //render...Ends\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}